<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz des Drapeaux R√©gionaux Europ√©ens</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;800&family=Source+Sans+3:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        /* ============================================
           VARIABLES ET RESET
           ============================================ */
        :root {
            --primary: #1a2332;
            --secondary: #c9a961;
            --accent: #8b3a3a;
            --background: #f8f6f1;
            --white: #ffffff;
            --success: #2d7d4e;
            --error: #c53030;
            --shadow-sm: 0 2px 8px rgba(26, 35, 50, 0.08);
            --shadow-md: 0 4px 16px rgba(26, 35, 50, 0.12);
            --shadow-lg: 0 8px 32px rgba(26, 35, 50, 0.16);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Source Sans 3', sans-serif;
            background: var(--background);
            color: var(--primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ============================================
           HEADER
           ============================================ */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, #2d3e50 100%);
            color: var(--white);
            padding: 3rem 1.5rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(201, 169, 97, 0.15) 0%, transparent 70%);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        .header::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -5%;
            width: 250px;
            height: 250px;
            background: radial-gradient(circle, rgba(139, 58, 58, 0.12) 0%, transparent 70%);
            border-radius: 50%;
            animation: float 8s ease-in-out infinite reverse;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(20px, 20px); }
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 800;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
            letter-spacing: -0.5px;
        }

        .header p {
            font-size: clamp(1rem, 2.5vw, 1.25rem);
            opacity: 0.9;
            position: relative;
            z-index: 1;
            font-weight: 300;
        }

        .advanced-link {
            display: inline-block;
            margin-top: 1rem;
            padding: 0.6rem 1.5rem;
            background: linear-gradient(135deg, #8b3a3a, #a94442);
            color: var(--white);
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.95rem;
            position: relative;
            z-index: 1;
            box-shadow: 0 4px 12px rgba(139, 58, 58, 0.3);
            transition: var(--transition);
        }

        .advanced-link:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 6px 16px rgba(139, 58, 58, 0.4);
        }

        /* ============================================
           CONTAINER
           ============================================ */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        /* ============================================
           CARD STYLING
           ============================================ */
        .card {
            background: var(--white);
            border-radius: 16px;
            padding: 2.5rem;
            box-shadow: var(--shadow-md);
            margin-bottom: 2rem;
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 1.5rem;
            text-align: center;
            position: relative;
            padding-bottom: 1rem;
        }

        .card-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, var(--secondary), var(--accent));
            border-radius: 2px;
        }

        /* ============================================
           SETUP SCREEN
           ============================================ */
        .setup-group {
            margin-bottom: 2rem;
        }

        .setup-label {
            display: block;
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--primary);
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
        }

        .option-btn {
            background: var(--white);
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 1rem;
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary);
            cursor: pointer;
            transition: var(--transition);
            font-family: 'Source Sans 3', sans-serif;
            position: relative;
            overflow: hidden;
        }

        .option-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(201, 169, 97, 0.1);
            transform: translate(-50%, -50%);
            transition: width 0.4s, height 0.4s;
        }

        .option-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .option-btn:hover {
            border-color: var(--secondary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .option-btn.selected {
            background: linear-gradient(135deg, var(--secondary) 0%, #d4b574 100%);
            border-color: var(--secondary);
            color: var(--white);
            box-shadow: var(--shadow-md);
        }

        .option-btn span {
            position: relative;
            z-index: 1;
        }

        /* ============================================
           PRIMARY BUTTON
           ============================================ */
        .btn-primary {
            background: linear-gradient(135deg, var(--accent) 0%, #a04545 100%);
            color: var(--white);
            border: none;
            border-radius: 12px;
            padding: 1.25rem 2.5rem;
            font-size: 1.125rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            width: 100%;
            margin-top: 1.5rem;
            font-family: 'Source Sans 3', sans-serif;
            letter-spacing: 0.5px;
            box-shadow: var(--shadow-md);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .btn-primary:active {
            transform: translateY(-1px);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* ============================================
           QUIZ SCREEN
           ============================================ */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .score {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--accent);
            font-family: 'Playfair Display', serif;
        }

        .question-counter {
            font-size: 1rem;
            color: var(--primary);
            font-weight: 600;
        }

        /* Progress Bar */
        .progress-container {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 2rem;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.06);
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary) 0%, var(--accent) 100%);
            border-radius: 10px;
            transition: width 0.4s ease-out;
            position: relative;
            overflow: hidden;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.3),
                transparent
            );
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Flag Display */
        .flag-container {
            text-align: center;
            margin: 2rem 0;
            padding: 2rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: 12px;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .flag-image {
            max-width: 100%;
            height: auto;
            max-height: 280px;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: var(--shadow-md);
            transition: var(--transition);
        }

        .flag-image:hover {
            transform: scale(1.02);
        }

        /* Answer Options */
        .options-container {
            display: grid;
            gap: 1rem;
            margin-top: 2rem;
        }

        .answer-btn {
            background: var(--white);
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.25rem 1.5rem;
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--primary);
            cursor: pointer;
            transition: var(--transition);
            text-align: left;
            font-family: 'Source Sans 3', sans-serif;
            position: relative;
            overflow: hidden;
        }

        .answer-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(201, 169, 97, 0.08);
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }

        .answer-btn:hover::before {
            width: 500px;
            height: 500px;
        }

        .answer-btn:hover:not(:disabled) {
            border-color: var(--secondary);
            transform: translateX(8px);
            box-shadow: var(--shadow-sm);
        }

        .answer-btn.correct {
            background: linear-gradient(135deg, var(--success) 0%, #38a169 100%);
            border-color: var(--success);
            color: var(--white);
            animation: correctPulse 0.5s ease-out;
        }

        .answer-btn.incorrect {
            background: linear-gradient(135deg, var(--error) 0%, #e53e3e 100%);
            border-color: var(--error);
            color: var(--white);
            animation: incorrectShake 0.5s ease-out;
        }

        .answer-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* ============================================
           RESULTS SCREEN
           ============================================ */
        .results-container {
            text-align: center;
        }

        .results-score {
            font-family: 'Playfair Display', serif;
            font-size: 4rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 2rem 0;
            animation: scaleIn 0.6s ease-out;
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .results-message {
            font-size: 1.5rem;
            margin: 1.5rem 0;
            color: var(--primary);
            font-weight: 600;
        }

        .results-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2.5rem 0;
        }

        .result-stat {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
        }

        .result-stat-value {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent);
            display: block;
        }

        .result-stat-label {
            font-size: 0.95rem;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            margin-top: 0.5rem;
        }

        /* ============================================
           UTILITY CLASSES
           ============================================ */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        /* ============================================
           RESPONSIVE DESIGN
           ============================================ */
        @media (max-width: 768px) {
            .container {
                padding: 1.5rem 1rem;
            }

            .card {
                padding: 1.5rem;
            }

            .header {
                padding: 2rem 1rem;
            }

            .button-grid {
                grid-template-columns: 1fr;
            }

            .results-score {
                font-size: 3rem;
            }

            .flag-image {
                max-height: 200px;
            }
        }

        @media (max-width: 480px) {
            .card-title {
                font-size: 1.5rem;
            }

            .quiz-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .results-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <h1>Quiz des Drapeaux R√©gionaux</h1>
        <p>Testez vos connaissances sur les r√©gions europ√©ennes</p>
        <a href="quiz_advanced.html" class="advanced-link">üî• Mode Avanc√©</a>
    </header>

    <div class="container">
        <!-- Setup Screen -->
        <div id="setupScreen" class="card">
            <h2 class="card-title">Configuration du Quiz</h2>

            <div class="setup-group">
                <label class="setup-label">S√©lectionnez un pays :</label>
                <div class="button-grid">
                    <button class="option-btn" data-country="all"><span>Tous les pays</span></button>
                    <button class="option-btn" data-country="france"><span>France</span></button>
                    <button class="option-btn" data-country="germany"><span>Allemagne</span></button>
                    <button class="option-btn" data-country="switzerland"><span>Suisse</span></button>
                    <button class="option-btn" data-country="spain"><span>Espagne</span></button>
                    <button class="option-btn" data-country="italy"><span>Italie</span></button>
                    <button class="option-btn" data-country="belgium"><span>Belgique</span></button>
                    <button class="option-btn" data-country="netherlands"><span>Pays-Bas</span></button>
                    <button class="option-btn" data-country="austria"><span>Autriche</span></button>
                    <button class="option-btn" data-country="ireland"><span>Irlande</span></button>
                </div>
            </div>

            <div class="setup-group">
                <label class="setup-label">Choisissez la difficult√© :</label>
                <div class="button-grid">
                    <button class="option-btn" data-difficulty="easy"><span>Facile<br>(5 questions)</span></button>
                    <button class="option-btn" data-difficulty="medium"><span>Moyen<br>(10 questions)</span></button>
                    <button class="option-btn" data-difficulty="hard"><span>Difficile<br>(15 questions)</span></button>
                </div>
            </div>

            <button id="startBtn" class="btn-primary" disabled>Commencer le Quiz</button>
        </div>

        <!-- Quiz Screen -->
        <div id="quizScreen" class="card hidden">
            <div class="quiz-header">
                <div class="score">Score: <span id="scoreValue">0</span></div>
                <div class="question-counter">
                    Question <span id="currentQuestion">1</span> / <span id="totalQuestions">10</span>
                </div>
            </div>

            <div class="progress-container">
                <div id="progressBar" class="progress-bar" style="width: 0%"></div>
            </div>

            <div class="flag-container">
                <img id="flagImage" class="flag-image" src="" alt="Drapeau r√©gional">
            </div>

            <div id="optionsContainer" class="options-container">
                <!-- Options will be dynamically inserted here -->
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="card hidden">
            <h2 class="card-title">R√©sultats</h2>

            <div class="results-container">
                <div class="results-score" id="finalScore">0%</div>
                <div class="results-message" id="resultMessage"></div>

                <div class="results-details">
                    <div class="result-stat">
                        <span class="result-stat-value" id="correctAnswers">0</span>
                        <span class="result-stat-label">Bonnes r√©ponses</span>
                    </div>
                    <div class="result-stat">
                        <span class="result-stat-value" id="incorrectAnswers">0</span>
                        <span class="result-stat-label">Mauvaises r√©ponses</span>
                    </div>
                    <div class="result-stat">
                        <span class="result-stat-value" id="percentageScore">0%</span>
                        <span class="result-stat-label">Pourcentage</span>
                    </div>
                </div>

                <button id="restartBtn" class="btn-primary">Recommencer</button>
            </div>
        </div>
    </div>

    <script>
        /* ============================================
           DONN√âES DES R√âGIONS
           ============================================ */

        // Chemins des drapeaux r√©gionaux - Tous les noms traduits en fran√ßais
        const regions = [
            // FRANCE (13 r√©gions)
            { name: "Bretagne", flag: "drapeaux_regions/france-bretagne.png", country: "france" },
            { name: "Corse", flag: "drapeaux_regions/france-corse.png", country: "france" },
            { name: "Provence-Alpes-C√¥te d'Azur", flag: "drapeaux_regions/france-provence-alpes-cote-azur.png", country: "france" },
            { name: "Occitanie", flag: "drapeaux_regions/france-occitanie.png", country: "france" },
            { name: "Normandie", flag: "drapeaux_regions/france-normandie.png", country: "france" },
            { name: "√éle-de-France", flag: "drapeaux_regions/france-ile-de-france.png", country: "france" },
            { name: "Grand Est", flag: "drapeaux_regions/france-grand-est.png", country: "france" },
            { name: "Nouvelle-Aquitaine", flag: "drapeaux_regions/france-nouvelle-aquitaine.png", country: "france" },
            { name: "Auvergne-Rh√¥ne-Alpes", flag: "drapeaux_regions/france-auvergne-rhone-alpes.png", country: "france" },
            { name: "Hauts-de-France", flag: "drapeaux_regions/france-hauts-de-france.png", country: "france" },
            { name: "Bourgogne-Franche-Comt√©", flag: "drapeaux_regions/france-bourgogne-franche-comte.png", country: "france" },
            { name: "Pays de la Loire", flag: "drapeaux_regions/france-pays-de-la-loire.png", country: "france" },
            { name: "Centre-Val de Loire", flag: "drapeaux_regions/france-centre-val-de-loire.png", country: "france" },

            // ALLEMAGNE (15 L√§nder - noms fran√ßais)
            { name: "Bavi√®re", flag: "drapeaux_regions/allemagne-baviere.png", country: "germany" },
            { name: "Bade-Wurtemberg", flag: "drapeaux_regions/allemagne-bade-wurtemberg.png", country: "germany" },
            { name: "Rh√©nanie-du-Nord-Westphalie", flag: "drapeaux_regions/allemagne-rhenanie-du-nord-westphalie.png", country: "germany" },
            { name: "Basse-Saxe", flag: "drapeaux_regions/allemagne-basse-saxe.png", country: "germany" },
            { name: "Hesse", flag: "drapeaux_regions/allemagne-hesse.png", country: "germany" },
            { name: "Saxe-Anhalt", flag: "drapeaux_regions/allemagne-saxe.png", country: "germany" },
            { name: "Rh√©nanie-Palatinat", flag: "drapeaux_regions/allemagne-rhenanie-palatinat.png", country: "germany" },
            { name: "Berlin", flag: "drapeaux_regions/allemagne-berlin.png", country: "germany" },
            { name: "Schleswig-Holstein", flag: "drapeaux_regions/allemagne-schleswig-holstein.png", country: "germany" },
            { name: "Brandebourg", flag: "drapeaux_regions/allemagne-brandebourg.png", country: "germany" },
            { name: "Thuringe", flag: "drapeaux_regions/allemagne-thuringe.png", country: "germany" },
            { name: "Hambourg", flag: "drapeaux_regions/allemagne-hambourg.png", country: "germany" },
            { name: "Mecklembourg-Pom√©ranie-Occidentale", flag: "drapeaux_regions/allemagne-mecklembourg-pomeranie-occidentale.png", country: "germany" },
            { name: "Sarre", flag: "drapeaux_regions/allemagne-sarre.png", country: "germany" },
            { name: "Br√™me", flag: "drapeaux_regions/allemagne-breme.png", country: "germany" },

            // SUISSE (26 cantons - noms fran√ßais)
            { name: "Zurich", flag: "drapeaux_regions/suisse-zurich.png", country: "switzerland" },
            { name: "Berne", flag: "drapeaux_regions/suisse-berne.png", country: "switzerland" },
            { name: "Gen√®ve", flag: "drapeaux_regions/suisse-geneve.png", country: "switzerland" },
            { name: "Vaud", flag: "drapeaux_regions/suisse-vaud.png", country: "switzerland" },
            { name: "Valais", flag: "drapeaux_regions/suisse-valais.png", country: "switzerland" },
            { name: "B√¢le-Ville", flag: "drapeaux_regions/suisse-bale-ville.png", country: "switzerland" },
            { name: "Tessin", flag: "drapeaux_regions/suisse-tessin.png", country: "switzerland" },
            { name: "Saint-Gall", flag: "drapeaux_regions/suisse-saint-gall.png", country: "switzerland" },
            { name: "Grisons", flag: "drapeaux_regions/suisse-grisons.png", country: "switzerland" },
            { name: "Argovie", flag: "drapeaux_regions/suisse-argovie.png", country: "switzerland" },
            { name: "Thurgovie", flag: "drapeaux_regions/suisse-thurgovie.png", country: "switzerland" },
            { name: "Fribourg", flag: "drapeaux_regions/suisse-fribourg.png", country: "switzerland" },
            { name: "Neuch√¢tel", flag: "drapeaux_regions/suisse-neuchatel.png", country: "switzerland" },
            { name: "Schwyz", flag: "drapeaux_regions/suisse-schwyz.png", country: "switzerland" },
            { name: "Uri", flag: "drapeaux_regions/suisse-uri.png", country: "switzerland" },
            { name: "Soleure", flag: "drapeaux_regions/suisse-soleure.png", country: "switzerland" },
            { name: "B√¢le-Campagne", flag: "drapeaux_regions/suisse-bale-campagne.png", country: "switzerland" },
            { name: "Schaffhouse", flag: "drapeaux_regions/suisse-schaffhouse.png", country: "switzerland" },
            { name: "Appenzell Rhodes-Ext√©rieures", flag: "drapeaux_regions/suisse-appenzell-rhodes-exterieures.png", country: "switzerland" },
            { name: "Appenzell Rhodes-Int√©rieures", flag: "drapeaux_regions/suisse-appenzell-rhodes-interieures.png", country: "switzerland" },
            { name: "Glaris", flag: "drapeaux_regions/suisse-glaris.png", country: "switzerland" },
            { name: "Zoug", flag: "drapeaux_regions/suisse-zoug.png", country: "switzerland" },
            { name: "Obwald", flag: "drapeaux_regions/suisse-obwald.png", country: "switzerland" },
            { name: "Nidwald", flag: "drapeaux_regions/suisse-nidwald.png", country: "switzerland" },
            { name: "Jura", flag: "drapeaux_regions/suisse-jura.png", country: "switzerland" },

            // ESPAGNE (17 communaut√©s autonomes - noms fran√ßais)
            { name: "Catalogne", flag: "drapeaux_regions/espagne-catalogne.png", country: "spain" },
            { name: "Pays Basque", flag: "drapeaux_regions/espagne-pays-basque.png", country: "spain" },
            { name: "Galice", flag: "drapeaux_regions/espagne-galice.png", country: "spain" },
            { name: "Andalousie", flag: "drapeaux_regions/espagne-andalousie.png", country: "spain" },
            { name: "Communaut√© Valencienne", flag: "drapeaux_regions/espagne-communaute-valencienne.png", country: "spain" },
            { name: "Canaries", flag: "drapeaux_regions/espagne-canaries.png", country: "spain" },
            { name: "Castille-et-Le√≥n", flag: "drapeaux_regions/espagne-castille-et-leon.png", country: "spain" },
            { name: "Madrid", flag: "drapeaux_regions/espagne-madrid.png", country: "spain" },
            { name: "Castille-La Manche", flag: "drapeaux_regions/espagne-castille-la-manche.png", country: "spain" },
            { name: "Murcie", flag: "drapeaux_regions/espagne-murcie.png", country: "spain" },
            { name: "Aragon", flag: "drapeaux_regions/espagne-aragon.png", country: "spain" },
            { name: "Estr√©madure", flag: "drapeaux_regions/espagne-estremadure.png", country: "spain" },
            { name: "Bal√©ares", flag: "drapeaux_regions/espagne-baleares.png", country: "spain" },
            { name: "Asturies", flag: "drapeaux_regions/espagne-asturies.png", country: "spain" },
            { name: "Navarre", flag: "drapeaux_regions/espagne-navarre.png", country: "spain" },
            { name: "Cantabrie", flag: "drapeaux_regions/espagne-cantabrie.png", country: "spain" },
            { name: "La Rioja", flag: "drapeaux_regions/espagne-la-rioja.png", country: "spain" },

            // ITALIE (20 r√©gions - noms fran√ßais)
            { name: "Lombardie", flag: "drapeaux_regions/italie-lombardie.png", country: "italy" },
            { name: "Sicile", flag: "drapeaux_regions/italie-sicile.png", country: "italy" },
            { name: "V√©n√©tie", flag: "drapeaux_regions/italie-venetie.png", country: "italy" },
            { name: "Latium", flag: "drapeaux_regions/italie-latium.png", country: "italy" },
            { name: "Pi√©mont", flag: "drapeaux_regions/italie-piemont.png", country: "italy" },
            { name: "Campanie", flag: "drapeaux_regions/italie-campanie.png", country: "italy" },
            { name: "√âmilie-Romagne", flag: "drapeaux_regions/italie-emilie-romagne.png", country: "italy" },
            { name: "Toscane", flag: "drapeaux_regions/italie-toscane.png", country: "italy" },
            { name: "Pouilles", flag: "drapeaux_regions/italie-pouilles.png", country: "italy" },
            { name: "Calabre", flag: "drapeaux_regions/italie-calabre.png", country: "italy" },
            { name: "Sardaigne", flag: "drapeaux_regions/italie-sardaigne.png", country: "italy" },
            { name: "Ligurie", flag: "drapeaux_regions/italie-ligurie.png", country: "italy" },
            { name: "Marches", flag: "drapeaux_regions/italie-marches.png", country: "italy" },
            { name: "Abruzzes", flag: "drapeaux_regions/italie-abruzzes.png", country: "italy" },
            { name: "Frioul-V√©n√©tie Julienne", flag: "drapeaux_regions/italie-frioul-venetie-julienne.png", country: "italy" },
            { name: "Trentin-Haut-Adige", flag: "drapeaux_regions/italie-trentin-haut-adige.png", country: "italy" },
            { name: "Ombrie", flag: "drapeaux_regions/italie-ombrie.png", country: "italy" },
            { name: "Basilicate", flag: "drapeaux_regions/italie-basilicate.png", country: "italy" },
            { name: "Molise", flag: "drapeaux_regions/italie-molise.png", country: "italy" },
            { name: "Vall√©e d'Aoste", flag: "drapeaux_regions/italie-vallee-aoste.png", country: "italy" },

            // BELGIQUE (13 provinces et r√©gions - noms fran√ßais)
            { name: "Anvers", flag: "drapeaux_regions/belgique-anvers.png", country: "belgium" },
            { name: "Brabant Flamand", flag: "drapeaux_regions/belgique-brabant-flamand.png", country: "belgium" },
            { name: "Brabant Wallon", flag: "drapeaux_regions/belgique-brabant-wallon.png", country: "belgium" },
            { name: "Bruxelles-Capitale", flag: "drapeaux_regions/belgique-bruxelles.png", country: "belgium" },
            { name: "Flandre Occidentale", flag: "drapeaux_regions/belgique-flandre-occidentale.png", country: "belgium" },
            { name: "Flandre Orientale", flag: "drapeaux_regions/belgique-flandre-orientale.png", country: "belgium" },
            { name: "R√©gion Flamande", flag: "drapeaux_regions/belgique-flandre.png", country: "belgium" },
            { name: "Hainaut", flag: "drapeaux_regions/belgique-hainaut.png", country: "belgium" },
            { name: "Li√®ge", flag: "drapeaux_regions/belgique-liege.png", country: "belgium" },
            { name: "Limbourg", flag: "drapeaux_regions/belgique-limbourg.png", country: "belgium" },
            { name: "Luxembourg", flag: "drapeaux_regions/belgique-luxembourg.png", country: "belgium" },
            { name: "Namur", flag: "drapeaux_regions/belgique-namur.png", country: "belgium" },
            { name: "Wallonie", flag: "drapeaux_regions/belgique-wallonie.png", country: "belgium" },

            // PAYS-BAS (12 provinces - noms fran√ßais)
            { name: "Groningue", flag: "drapeaux_regions/pays-bas-groningue.png", country: "netherlands" },
            { name: "Drenthe", flag: "drapeaux_regions/pays-bas-drenthe.png", country: "netherlands" },
            { name: "Flevoland", flag: "drapeaux_regions/pays-bas-flevoland.png", country: "netherlands" },
            { name: "Gueldre", flag: "drapeaux_regions/pays-bas-gueldre.png", country: "netherlands" },
            { name: "Limbourg", flag: "drapeaux_regions/pays-bas-limbourg.png", country: "netherlands" },
            { name: "Hollande-Septentrionale", flag: "drapeaux_regions/pays-bas-hollande-septentrionale.png", country: "netherlands" },
            { name: "Overijssel", flag: "drapeaux_regions/pays-bas-overijssel.png", country: "netherlands" },
            { name: "Z√©lande", flag: "drapeaux_regions/pays-bas-zelande.png", country: "netherlands" },
            { name: "Hollande-M√©ridionale", flag: "drapeaux_regions/pays-bas-hollande-meridionale.png", country: "netherlands" },
            { name: "Frise", flag: "drapeaux_regions/pays-bas-frise.png", country: "netherlands" },
            { name: "Brabant-Septentrional", flag: "drapeaux_regions/pays-bas-brabant-septentrional.png", country: "netherlands" },
            { name: "Utrecht", flag: "drapeaux_regions/pays-bas-utrecht.png", country: "netherlands" },

            // AUTRICHE (7 L√§nder disponibles - noms fran√ßais)
            { name: "Burgenland", flag: "drapeaux_regions/autriche-burgenland.png", country: "austria" },
            { name: "Carinthie", flag: "drapeaux_regions/autriche-carinthie.png", country: "austria" },
            { name: "Basse-Autriche", flag: "drapeaux_regions/autriche-basse-autriche.png", country: "austria" },
            { name: "Haute-Autriche", flag: "drapeaux_regions/autriche-haute-autriche.png", country: "austria" },
            { name: "Salzbourg", flag: "drapeaux_regions/autriche-salzbourg.png", country: "austria" },
            { name: "Styrie", flag: "drapeaux_regions/autriche-styrie.png", country: "austria" },
            { name: "Tyrol", flag: "drapeaux_regions/autriche-tyrol.png", country: "austria" },

            // IRLANDE (5 provinces - noms fran√ßais)
            { name: "Connacht", flag: "drapeaux_regions/irlande-connacht.png", country: "ireland" },
            { name: "Leinster", flag: "drapeaux_regions/irlande-leinster.png", country: "ireland" },
            { name: "Munster", flag: "drapeaux_regions/irlande-munster.png", country: "ireland" },
            { name: "Ulster", flag: "drapeaux_regions/irlande-ulster.png", country: "ireland" },
            { name: "Mide", flag: "drapeaux_regions/irlande-mide.png", country: "ireland" }
        ];

        /* ============================================
           √âTAT DE L'APPLICATION
           ============================================ */

        let quizState = {
            selectedCountries: [], // Maintenant un tableau pour s√©lection multiple
            selectedDifficulty: null,
            questions: [],
            currentQuestionIndex: 0,
            score: 0,
            answered: false
        };

        /* ============================================
           S√âLECTEURS DOM
           ============================================ */

        const setupScreen = document.getElementById('setupScreen');
        const quizScreen = document.getElementById('quizScreen');
        const resultsScreen = document.getElementById('resultsScreen');
        const startBtn = document.getElementById('startBtn');
        const restartBtn = document.getElementById('restartBtn');

        /* ============================================
           CONFIGURATION DU QUIZ
           ============================================ */

        // Gestion de la s√©lection des pays (multi-s√©lection)
        document.querySelectorAll('[data-country]').forEach(btn => {
            btn.addEventListener('click', () => {
                const country = btn.dataset.country;

                // Si "Tous les pays" est cliqu√©
                if (country === 'all') {
                    // D√©s√©lectionner tous les autres pays
                    document.querySelectorAll('[data-country]').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    quizState.selectedCountries = ['all'];
                } else {
                    // Retirer "Tous les pays" si s√©lectionn√©
                    const allBtn = document.querySelector('[data-country="all"]');
                    allBtn.classList.remove('selected');

                    // Toggle la s√©lection du pays
                    if (btn.classList.contains('selected')) {
                        btn.classList.remove('selected');
                        quizState.selectedCountries = quizState.selectedCountries.filter(c => c !== country);
                    } else {
                        btn.classList.add('selected');
                        quizState.selectedCountries.push(country);
                    }

                    // Si aucun pays n'est s√©lectionn√©, on ne peut pas d√©marrer
                    if (quizState.selectedCountries.length === 0) {
                        quizState.selectedCountries = [];
                    }
                }

                checkStartButton();
            });
        });

        // Gestion de la s√©lection de la difficult√©
        document.querySelectorAll('[data-difficulty]').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('[data-difficulty]').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                quizState.selectedDifficulty = btn.dataset.difficulty;
                checkStartButton();
            });
        });

        // V√©rifier si le bouton de d√©marrage peut √™tre activ√©
        function checkStartButton() {
            if (quizState.selectedCountries.length > 0 && quizState.selectedDifficulty) {
                startBtn.disabled = false;
            }
        }

        // D√©marrer le quiz
        startBtn.addEventListener('click', startQuiz);
        restartBtn.addEventListener('click', resetQuiz);

        /* ============================================
           LOGIQUE DU QUIZ
           ============================================ */

        function startQuiz() {
            // Filtrer les r√©gions selon les pays s√©lectionn√©s
            let availableRegions = quizState.selectedCountries.includes('all')
                ? [...regions]
                : regions.filter(r => quizState.selectedCountries.includes(r.country));

            // D√©terminer le nombre de questions
            const numQuestions = {
                'easy': 5,
                'medium': 10,
                'hard': 15
            }[quizState.selectedDifficulty];

            // V√©rifier qu'il y a assez de r√©gions
            if (availableRegions.length < numQuestions) {
                alert(`Pas assez de r√©gions disponibles pour ce pays (minimum ${numQuestions} requis).`);
                return;
            }

            // M√©langer et s√©lectionner les questions
            quizState.questions = shuffleArray(availableRegions).slice(0, numQuestions);
            quizState.currentQuestionIndex = 0;
            quizState.score = 0;
            quizState.answered = false;

            // Afficher l'√©cran de quiz
            setupScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');

            // Mettre √† jour l'interface
            document.getElementById('totalQuestions').textContent = numQuestions;

            // Afficher la premi√®re question
            showQuestion();
        }

        function showQuestion() {
            const question = quizState.questions[quizState.currentQuestionIndex];
            quizState.answered = false;

            // Mettre √† jour l'interface
            document.getElementById('currentQuestion').textContent = quizState.currentQuestionIndex + 1;
            document.getElementById('scoreValue').textContent = quizState.score;

            // Mettre √† jour la barre de progression
            const progress = ((quizState.currentQuestionIndex) / quizState.questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';

            // Afficher le drapeau
            document.getElementById('flagImage').src = question.flag;
            document.getElementById('flagImage').alt = `Drapeau de ${question.name}`;

            // G√©n√©rer les options de r√©ponse
            const options = generateOptions(question);
            displayOptions(options, question.name);
        }

        function generateOptions(correctRegion) {
            // Obtenir les r√©gions disponibles pour les mauvaises r√©ponses
            let availableForWrong = quizState.selectedCountry === 'all'
                ? regions.filter(r => r.name !== correctRegion.name)
                : regions.filter(r => r.country === correctRegion.country && r.name !== correctRegion.name);

            // S√©lectionner 3 mauvaises r√©ponses al√©atoires
            const wrongAnswers = shuffleArray(availableForWrong).slice(0, 3);

            // Combiner avec la bonne r√©ponse et m√©langer
            const allOptions = shuffleArray([correctRegion, ...wrongAnswers]);

            return allOptions;
        }

        function displayOptions(options, correctAnswer) {
            const container = document.getElementById('optionsContainer');
            container.innerHTML = '';

            options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.textContent = option.name;
                btn.addEventListener('click', () => handleAnswer(option.name, correctAnswer, btn));
                container.appendChild(btn);
            });
        }

        function handleAnswer(selectedAnswer, correctAnswer, selectedBtn) {
            if (quizState.answered) return;

            quizState.answered = true;
            const buttons = document.querySelectorAll('.answer-btn');

            // D√©sactiver tous les boutons
            buttons.forEach(btn => btn.disabled = true);

            // V√©rifier la r√©ponse
            if (selectedAnswer === correctAnswer) {
                selectedBtn.classList.add('correct');
                quizState.score++;
                document.getElementById('scoreValue').textContent = quizState.score;
            } else {
                selectedBtn.classList.add('incorrect');
                // Montrer la bonne r√©ponse
                buttons.forEach(btn => {
                    if (btn.textContent === correctAnswer) {
                        btn.classList.add('correct');
                    }
                });
            }

            // Passer √† la question suivante apr√®s 2 secondes
            setTimeout(() => {
                quizState.currentQuestionIndex++;

                if (quizState.currentQuestionIndex < quizState.questions.length) {
                    showQuestion();
                } else {
                    showResults();
                }
            }, 2000);
        }

        function showResults() {
            const totalQuestions = quizState.questions.length;
            const correctAnswers = quizState.score;
            const incorrectAnswers = totalQuestions - correctAnswers;
            const percentage = Math.round((correctAnswers / totalQuestions) * 100);

            // D√©terminer le message selon le pourcentage
            let message = '';
            if (percentage === 100) {
                message = "üèÜ Parfait ! Vous √™tes un expert des r√©gions europ√©ennes !";
            } else if (percentage >= 80) {
                message = "üåü Excellent ! Tr√®s bonne ma√Ætrise des drapeaux r√©gionaux !";
            } else if (percentage >= 60) {
                message = "üëç Bien jou√© ! Continuez √† vous am√©liorer !";
            } else if (percentage >= 40) {
                message = "üìö Pas mal, mais il y a encore du travail !";
            } else {
                message = "üí™ Continuez √† apprendre, vous progresserez !";
            }

            // Mettre √† jour l'interface
            document.getElementById('finalScore').textContent = percentage + '%';
            document.getElementById('resultMessage').textContent = message;
            document.getElementById('correctAnswers').textContent = correctAnswers;
            document.getElementById('incorrectAnswers').textContent = incorrectAnswers;
            document.getElementById('percentageScore').textContent = percentage + '%';

            // Afficher l'√©cran de r√©sultats
            quizScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
        }

        function resetQuiz() {
            quizState = {
                selectedCountries: [],
                selectedDifficulty: null,
                questions: [],
                currentQuestionIndex: 0,
                score: 0,
                answered: false
            };

            // R√©initialiser les s√©lections
            document.querySelectorAll('[data-country]').forEach(b => b.classList.remove('selected'));
            document.querySelectorAll('[data-difficulty]').forEach(b => b.classList.remove('selected'));
            startBtn.disabled = true;

            // Afficher l'√©cran de configuration
            resultsScreen.classList.add('hidden');
            setupScreen.classList.remove('hidden');
        }

        /* ============================================
           UTILITAIRES
           ============================================ */

        // Fonction pour m√©langer un tableau (algorithme Fisher-Yates)
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
    </script>
</body>
</html>
